(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{17:function(e,t,c){"use strict";c.r(t),c.d(t,"ORDER_CREATE_REQUEST",(function(){return r})),c.d(t,"ORDER_CREATE_SUCCESS",(function(){return n})),c.d(t,"ORDER_CREATE_FAIL",(function(){return s})),c.d(t,"ORDER_CREATE_RESET",(function(){return a})),c.d(t,"ORDER_DETAILS_REQUEST",(function(){return i})),c.d(t,"ORDER_DETAILS_SUCCESS",(function(){return d})),c.d(t,"ORDER_DETAILS_FAIL",(function(){return o}));var r="ORDER_CREATE_REQUEST",n="ORDER_CREATE_SUCCESS",s="ORDER_CREATE_FAIL",a="ORDER_CREATE_RESET",i="ORDER_DETAILS_REQUEST",d="ORDER_DETAILS_SUCCESS",o="ORDER_DETAILS_FAIL"},51:function(e,t,c){},52:function(e,t,c){},72:function(e,t,c){"use strict";c.r(t);var r=c(0),n=c(1),s=c(2),a=c(24),i=c.n(a),d=(c(51),c(5)),o=c(7),l=(c(52),c(18)),j=c(6),u=c.n(j),b=c(11),h=c(8),p=c.n(h),O=c(9),m=c.n(O),x="ADD_TO_CART",v="CART_REMOVE_ITEM",f="CART_SAVE_SHIPPING",g="CART_SAVE_PAYMENT",y="CART_SAVE_PRICES",S="CART_EMPTY",E=function(e,t){return function(){var c=Object(b.a)(u.a.mark((function c(r,n){var s,a,i,d;return u.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,p.a.get("/api/products/"+e);case 3:s=c.sent,a=s.data,r({type:x,payload:{product:a._id,name:a.name,image:a.image,price:a.price,countInStock:a.countInStock,qty:t}}),i=n(),d=i.cart.cartItems,m.a.set("cartItems",JSON.stringify(d)),c.next=12;break;case 10:c.prev=10,c.t0=c.catch(0);case 12:case"end":return c.stop()}}),c,null,[[0,10]])})));return function(e,t){return c.apply(this,arguments)}}()};var N=function(e){var t=Object(s.c)((function(e){return e}));console.log(t);var c=Object(s.c)((function(e){return e.userSignin})).userInfo,a=Object(s.c)((function(e){return e.cart})).cartItems,i=Object(s.c)((function(e){return e.previous})).previousItems,o=e.match.params.id,j=e.location.search?Number(e.location.search.split("=")[1]):1,u=Object(s.b)(),b=function(e){u(function(e){return function(t,c){try{t({type:v,payload:e});var r=c().cart.cartItems;m.a.set("cartItems",JSON.stringify(r))}catch(n){}}}(e))};return Object(n.useEffect)((function(){o&&u(E(o,j))}),[]),Object(r.jsx)("div",{className:"cart-page",children:Object(r.jsxs)("div",{className:"cart",children:[Object(r.jsx)("div",{className:"cart-sidebar"}),Object(r.jsx)("div",{className:"cart-list",children:Object(r.jsxs)("ul",{className:"cart-list-container",children:[Object(r.jsx)("li",{children:Object(r.jsx)("h3",{children:"Shopping Cart"})}),0===a.length?Object(r.jsxs)("div",{className:"empty-cart",children:[Object(r.jsx)("h2",{children:"Your Cart is empty"}),c?Object(r.jsx)(d.b,{to:"/",children:"Discover Products"}):Object(r.jsxs)("span",{children:[Object(r.jsx)(d.b,{children:"Sign Up"}),"  |  ",Object(r.jsx)(d.b,{children:"Sign In"})]})]}):a.map((function(e){return Object(r.jsxs)("li",{children:[Object(r.jsx)("div",{className:"cart-image",children:Object(r.jsx)("img",{src:e.image,alt:"product"})}),Object(r.jsxs)("div",{className:"cart-name",children:[Object(r.jsx)("div",{children:Object(r.jsxs)(d.b,{className:"cart-link",to:"/product/"+e.product,children:[" ",e.name," "]})}),Object(r.jsxs)("div",{children:["Qty:",Object(r.jsx)("select",{value:e.qty,onChange:function(t){return u(E(e.product,t.target.value))},children:Object(l.a)(Array(e.countInStock).keys()).map((function(e){return Object(r.jsx)("option",{value:e+1,children:e+1},e+1)}))})]}),Object(r.jsx)("button",{type:"button",className:"button",onClick:function(){return b(e.product)},children:"Remove"})]}),Object(r.jsxs)("div",{className:"cart-price",children:["$",e.price]})]},e.product)}))]})}),Object(r.jsxs)("div",{className:"cart-action",children:[0===a.length&&Object(r.jsx)("h2",{children:"What You've Looked At"}),0===a.length?i.map((function(e){return Object(r.jsxs)("li",{children:[Object(r.jsx)("div",{className:"previous-item-image",children:Object(r.jsx)("img",{src:e.image,alt:"product"})}),Object(r.jsxs)("div",{className:"previous-item-name",children:[Object(r.jsx)("div",{children:Object(r.jsxs)(d.b,{className:"previous-item-link",to:"/product/"+e.product,children:[" ",e.name," "]})}),Object(r.jsxs)("div",{className:"previous-item-rating",children:[e.rating," Stars | ",e.numReviews]}),Object(r.jsxs)("div",{className:"previous-item-price",children:["$",e.price]})]})]},e.product)})):Object(r.jsxs)("span",{children:[Object(r.jsxs)("h3",{children:["Subtotal (",a.reduce((function(e,t){return e+t.qty}),0)," items) :",Object(r.jsx)("br",{}),"$",a.reduce((function(e,t){return e+t.price*t.qty}),0)]}),Object(r.jsx)("button",{className:"button primary",disabled:0===a.length,onClick:function(){e.history.push("/signin?redirect=shipping")},children:"Checkout"})]})]})]})})},R="PRODUCT_LIST_REQUEST",C="PRODUCT_LIST_SUCCESS",I="PRODUCT_LIST_FAIL",_="PRODUCT_DETAILS_REQUEST",T="PRODUCT_DETAILS_SUCCESS",A="PRODUCT_DETAILS_FAIL",k="PRODUCT_SAVE_REQUEST",D="PRODUCT_SAVE_SUCCESS",w="PRODUCT_SAVE_FAIL",P="PRODUCT_DELETE_REQUEST",U="PRODUCT_DELETE_SUCCESS",L="PRODUCT_DELETE_FAIL",F="ADD_TO_PREVIOUS",Q=function(){return function(){var e=Object(b.a)(u.a.mark((function e(t){var c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:R}),e.next=4,p.a.get("/api/products");case 4:c=e.sent,r=c.data,t({type:C,payload:r}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:I,payload:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()};var $=function(e){var t=e.rating,c=e.numReviews;return Object(r.jsxs)("div",{className:"rating",children:[Object(r.jsx)("span",{children:Object(r.jsx)("i",{className:t>=1?"fa fa-star":t>=.5?"fa fa-star-half-o":"fa fa-star-o"})}),Object(r.jsx)("span",{children:Object(r.jsx)("i",{className:t>=2?"fa fa-star":t>=1.5?"fa fa-star-half-o":"fa fa-star-o"})}),Object(r.jsx)("span",{children:Object(r.jsx)("i",{className:t>=3?"fa fa-star":t>=2.5?"fa fa-star-half-o":"fa fa-star-o"})}),Object(r.jsx)("span",{children:Object(r.jsx)("i",{className:t>=4?"fa fa-star":t>=3.5?"fa fa-star-half-o":"fa fa-star-o"})}),Object(r.jsx)("span",{children:Object(r.jsx)("i",{className:t>=5?"fa fa-star":t>=4.5?"fa fa-star-half-o":"fa fa-star-o"})}),Object(r.jsx)("span",{children:c+" reviews"})]})};var M=function(e){var t=Object(s.c)((function(e){return e.productList})),c=t.products,a=t.loading,i=t.error,o=Object(s.c)((function(e){return e.previous})).previousItems,l=Object(s.b)();return Object(n.useEffect)((function(){return l(Q()),function(){}}),[]),a?Object(r.jsx)("div",{className:"loading",children:"Loading..."}):i?Object(r.jsxs)("div",{className:"error-container",children:[Object(r.jsx)("h2",{children:"It seems our server is taking a break... "}),Object(r.jsx)("p",{children:"Sorry for the inconvenience, it'll be back up shortly."})]}):Object(r.jsxs)("ul",{className:"products",children:[0!==o.length&&Object(r.jsxs)("div",{className:"previous-item-bar",children:[Object(r.jsx)("h3",{children:"Items you've viewed at recently"}),Object(r.jsx)("ul",{children:o.map((function(e){return Object(r.jsxs)("li",{children:[Object(r.jsx)("div",{className:"previous-item-image",children:Object(r.jsx)("img",{src:e.image,alt:"product"})}),Object(r.jsxs)("div",{className:"previous-item-name",children:[Object(r.jsx)("div",{children:Object(r.jsxs)(d.b,{className:"previous-item-link",to:"/product/"+e.product,children:[" ",e.name," "]})}),Object(r.jsx)("div",{className:"previous-item-rating",children:Object(r.jsx)($,{rating:e.rating,numReviews:e.numReviews})}),Object(r.jsxs)("div",{className:"previous-item-price",children:["$",e.price]})]})]},e.product)}))})]}),Object(r.jsx)("h2",{children:"Trending"}),c.map((function(e){return Object(r.jsx)("li",{children:Object(r.jsxs)("div",{className:"product",children:[Object(r.jsx)(d.b,{className:"product-name",to:"/product/"+e._id,children:Object(r.jsx)("img",{className:"product-image",src:e.image,alt:"product"})}),Object(r.jsx)(d.b,{className:"product-name",to:"/product/"+e._id,children:e.name}),Object(r.jsx)("div",{className:"product-brand",children:e.brand}),Object(r.jsxs)("div",{className:"product-price",children:["$",e.price]}),Object(r.jsx)($,{rating:e.rating,numReviews:e.numReviews})]})},e._id)}))]})},q=c(3);var B=function(e){var t=Object(n.useState)(1),c=Object(q.a)(t,2),a=c[0],i=c[1],d=Object(s.c)((function(e){return e.productDetails})),o=d.product,j=d.loading,h=d.error,O=Object(s.b)();return Object(n.useEffect)((function(){var t;return O((t=e.match.params.id,function(){var e=Object(b.a)(u.a.mark((function e(c){var r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c({type:_,payload:t}),e.next=4,p.a.get("/api/products/"+t);case 4:r=e.sent,n=r.data,c({type:T,payload:n}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),c({type:A,payload:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())),O(function(e){return function(){var t=Object(b.a)(u.a.mark((function t(c,r){var n,s,a,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.a.get("/api/products/"+e);case 3:n=t.sent,s=n.data,c({type:F,payload:{product:s._id,name:s.name,image:s.image,price:s.price,countInStock:s.countInStock,rating:s.rating,numReviews:s.numReviews}}),a=r(),i=a.previous.previousItems,m.a.set("previousItems",JSON.stringify(i)),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(0);case 12:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,c){return t.apply(this,arguments)}}()}(e.match.params.id)),function(){}}),[]),Object(r.jsx)("div",{className:"product-page",children:j?Object(r.jsx)("div",{className:"loading",children:"Loading..."}):h?Object(r.jsxs)("div",{className:"error-container",children:[Object(r.jsx)("h2",{children:"It seems our server is taking a break... "}),Object(r.jsx)("p",{children:"Sorry for the inconvenience, it'll be back up shortly."})]}):Object(r.jsxs)("div",{className:"details",children:[Object(r.jsx)("div",{className:"details-image",children:Object(r.jsx)("img",{src:o.image,alt:"product"})}),Object(r.jsx)("div",{className:"details-info",children:Object(r.jsxs)("ul",{children:[Object(r.jsxs)("li",{children:[Object(r.jsx)("p",{children:o.brand}),Object(r.jsx)("h4",{children:o.name})]}),Object(r.jsx)("li",{className:"product-rating",children:Object(r.jsx)($,{rating:o.rating,numReviews:o.numReviews})}),Object(r.jsxs)("li",{className:"details-price",children:["Price: ",Object(r.jsxs)("b",{children:["$",o.price," "]})]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("h5",{children:"Description"}),Object(r.jsx)("div",{children:o.description})]})]})}),Object(r.jsx)("div",{className:"details-action",children:Object(r.jsxs)("ul",{children:[Object(r.jsxs)("li",{children:["Price: ",Object(r.jsxs)("b",{children:["$",o.price]})]}),o.countInStock>0&&Object(r.jsx)("li",{children:Object(r.jsx)("span",{className:"product-status",children:"In Stock"})}),Object(r.jsxs)("li",{children:["Qty: ",Object(r.jsx)("select",{value:a,onChange:function(e){i(e.target.value)},children:Object(l.a)(Array(o.countInStock).keys()).map((function(e){return Object(r.jsx)("option",{value:e+1,children:e+1},e+1)}))})]}),Object(r.jsx)("li",{children:o.countInStock>0?Object(r.jsx)("button",{onClick:function(){e.history.push("/cart/"+e.match.params.id+"?qty="+a)},className:"button primary",children:"Add to Cart"}):Object(r.jsxs)("span",{children:[Object(r.jsx)("div",{className:"product-status out-of-stock",children:"Sorry, we ran out"}),Object(r.jsx)("center",{children:Object(r.jsx)("div",{children:"but we're getting more"})})]})})]})})]})})};var J=function(e){var t=Object(n.useState)(!1),c=Object(q.a)(t,2),a=c[0],i=c[1],d=Object(n.useState)(""),o=Object(q.a)(d,2),l=o[0],j=o[1],h=Object(n.useState)(""),O=Object(q.a)(h,2),m=O[0],x=O[1],v=Object(n.useState)(""),f=Object(q.a)(v,2),g=f[0],y=f[1],S=Object(n.useState)(""),E=Object(q.a)(S,2),N=E[0],R=E[1],C=Object(n.useState)(""),I=Object(q.a)(C,2),_=I[0],T=I[1],A=Object(n.useState)(""),F=Object(q.a)(A,2),$=F[0],M=F[1],B=Object(n.useState)(""),J=Object(q.a)(B,2),z=J[0],V=J[1],G=Object(n.useState)(""),Y=Object(q.a)(G,2),X=Y[0],H=Y[1],W=Object(n.useState)(""),Z=Object(q.a)(W,2),K=Z[0],ee=Z[1],te=Object(n.useState)(""),ce=Object(q.a)(te,2),re=ce[0],ne=ce[1],se=Object(s.c)((function(e){return e.productSave})),ae=Object(s.c)((function(e){return e.productDelete})),ie=Object(s.c)((function(e){return e.productList})),de=se.loading,oe=se.success,le=se.error,je=(ae.loading,ae.success),ue=(ae.error,ie.loading,ie.products),be=(ie.error,Object(s.b)());Object(n.useEffect)((function(){return oe&&i(!1),be(Q()),function(){}}),[oe,je]);var he=function(e){i(!0),j(e._id),x(e.name),y(e.price),R(e.image),T(e.brand),M(e.category),V(e.countInStock),H(e.description),ee(e.rating),ne(e.numReviews)},pe=function(e){var t;be((t=e._id,function(){var e=Object(b.a)(u.a.mark((function e(c,r){var n,s,a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=r(),s=n.userSignin.userInfo,c({type:P,payload:t}),e.next=5,p.a.delete("/api/products/"+t,{headers:{Authorization:"Bearer "+s.token}});case 5:a=e.sent,i=a.data,c({type:U,payload:i,success:!0}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),c({type:L,payload:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,c){return e.apply(this,arguments)}}()))};return Object(r.jsxs)("div",{className:"content content-margined",children:[Object(r.jsxs)("div",{className:"product-header",children:[Object(r.jsx)("h3",{children:"Products"}),Object(r.jsx)("button",{className:"button primary",onClick:function(){return he({})},children:"Add Product"})]}),a&&Object(r.jsx)("div",{className:"form",children:Object(r.jsx)("form",{onSubmit:function(e){var t;e.preventDefault(),be((t={_id:l,name:m,price:g,image:N,brand:_,category:$,countInStock:z,description:X,rating:K,numReviews:re},function(){var e=Object(b.a)(u.a.mark((function e(c,r){var n,s,a,i,d,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,c({type:k,payload:t}),n=r(),s=n.userSignin.userInfo,!t._id){e.next=11;break}return e.next=6,p.a.put("/api/products/"+t._id,t,{headers:{Authorization:"Bearer "+s.token}});case 6:a=e.sent,i=a.data,c({type:D,payload:i}),e.next=16;break;case 11:return e.next=13,p.a.post("/api/products",t,{headers:{Authorization:"Bearer "+s.token}});case 13:d=e.sent,o=d.data,c({type:D,payload:o});case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),c({type:w,payload:e.t0.message});case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t,c){return e.apply(this,arguments)}}()))},children:Object(r.jsxs)("ul",{className:"form-container",id:"secondary-form",children:[Object(r.jsx)("li",{children:Object(r.jsx)("h2",{children:"Create Product"})}),Object(r.jsx)("li",{children:le&&Object(r.jsx)("span",{className:"error",children:"Couldn't create product"})}),Object(r.jsxs)("li",{children:[Object(r.jsx)("label",{htmlFor:"name",children:"Product Name"}),Object(r.jsx)("input",{value:m,type:"text",name:"name",id:"name",onChange:function(e){return x(e.target.value)}})]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("label",{htmlFor:"price",children:"Price"}),Object(r.jsx)("input",{value:g,type:"text",id:"price",name:"price",onChange:function(e){return y(e.target.value)}})]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("label",{htmlFor:"image",children:"Image"}),Object(r.jsx)("input",{value:N,type:"text",id:"image",name:"image",onChange:function(e){return R(e.target.value)}})]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("label",{htmlFor:"brand",children:"Brand"}),Object(r.jsx)("input",{value:_,type:"text",id:"brand",name:"brand",onChange:function(e){return T(e.target.value)}})]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("label",{htmlFor:"category",children:"Category"}),Object(r.jsx)("input",{value:$,type:"text",id:"category",name:"category",onChange:function(e){return M(e.target.value)}})]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("label",{htmlFor:"countInStock",children:"Stock"}),Object(r.jsx)("input",{value:z,type:"text",id:"countInStock",name:"countInStock",onChange:function(e){return V(e.target.value)}})]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("label",{htmlFor:"description",children:"Description"}),Object(r.jsx)("textarea",{value:X,id:"description",name:"description",onChange:function(e){return H(e.target.value)}})]}),Object(r.jsx)("li",{children:Object(r.jsx)("button",{type:"submit",className:"button primary",children:de?Object(r.jsx)("span",{children:"Sending product to database..."}):l?Object(r.jsx)("span",{children:"Update"}):Object(r.jsx)("span",{children:"Continue"})})}),Object(r.jsx)("li",{children:Object(r.jsx)("button",{className:"button",onClick:function(){return i(!1)},children:"Close"})})]})})}),Object(r.jsx)("div",{className:"product-list",children:Object(r.jsxs)("table",{children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{children:"ID"}),Object(r.jsx)("th",{children:"Name"}),Object(r.jsx)("th",{children:"Price"}),Object(r.jsx)("th",{children:"Category"}),Object(r.jsx)("th",{children:"Brand"}),Object(r.jsx)("th",{children:"Action"})]})}),Object(r.jsx)("tbody",{children:ue.map((function(e){return Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:e._id}),Object(r.jsx)("td",{children:e.name}),Object(r.jsx)("td",{children:e.price}),Object(r.jsx)("td",{children:e.category}),Object(r.jsx)("td",{children:e.brand}),Object(r.jsxs)("td",{children:[Object(r.jsx)("button",{className:"button edit",onClick:function(){return he(e)},children:"Edit"})," ",Object(r.jsx)("button",{className:"button delete",onClick:function(){return pe(e)},children:"Delete"})]})]},e._id)}))})]})})]})},z="USER_SIGNIN_REQUEST",V="USER_SIGNIN_SUCCESS",G="USER_SIGNIN_FAIL",Y="USER_REGISTER_REQUEST",X="USER_REGISTER_SUCCESS",H="USER_REGISTER_FAIL";var W=function(e){var t=Object(n.useState)(""),c=Object(q.a)(t,2),a=c[0],i=c[1],o=Object(n.useState)(""),l=Object(q.a)(o,2),j=l[0],h=l[1],O=Object(s.c)((function(e){return e.userSignin})),x=O.loading,v=O.userInfo,f=O.error,g=Object(s.b)(),y=e.location.search?e.location.search.split("=")[1]:"/";return Object(n.useEffect)((function(){return v&&e.history.push(y),function(){}}),[v]),Object(r.jsx)("div",{className:"form",children:Object(r.jsx)("form",{onSubmit:function(e){e.preventDefault(),g(function(e,t){return function(){var c=Object(b.a)(u.a.mark((function c(r){var n,s;return u.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return r({type:z,payload:{email:e,password:t}}),c.prev=1,c.next=4,p.a.post("/api/users/signin",{email:e,password:t});case 4:n=c.sent,s=n.data,r({type:V,payload:s}),m.a.set("userInfo",JSON.stringify(s)),c.next=13;break;case 10:c.prev=10,c.t0=c.catch(1),r({type:G,payload:c.t0.message});case 13:case"end":return c.stop()}}),c,null,[[1,10]])})));return function(e){return c.apply(this,arguments)}}()}(a,j))},children:Object(r.jsxs)("ul",{className:"form-container",children:[Object(r.jsx)("li",{children:Object(r.jsx)("h2",{children:"Sign In"})}),Object(r.jsx)("li",{children:f&&Object(r.jsx)("span",{className:"error",children:"Your credentials didn't match"})}),Object(r.jsxs)("li",{children:[Object(r.jsx)("label",{htmlFor:"email",children:"Email"}),Object(r.jsx)("input",{type:"email",name:"email",id:"email",onChange:function(e){return i(e.target.value)}})]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("label",{htmlFor:"password",children:"Password"}),Object(r.jsx)("input",{type:"password",id:"password",name:"password",onChange:function(e){return h(e.target.value)}})]}),Object(r.jsx)("li",{children:Object(r.jsx)("button",{type:"submit",className:"button primary",children:x?Object(r.jsx)("span",{children:"Checking the database..."}):Object(r.jsx)("span",{children:"Continue"})})}),Object(r.jsx)("li",{children:"Need to create an account?"}),Object(r.jsx)("li",{children:Object(r.jsx)(d.b,{to:"/"===y?"register":"register?redirect="+y,id:"link-to-register",children:"Create one here"})})]})})})};var Z=function(e){var t=Object(n.useState)(""),c=Object(q.a)(t,2),a=c[0],i=c[1],o=Object(n.useState)(""),l=Object(q.a)(o,2),j=l[0],h=l[1],O=Object(n.useState)(""),x=Object(q.a)(O,2),v=x[0],f=x[1],g=Object(n.useState)(""),y=Object(q.a)(g,2),S=(y[0],y[1]),E=Object(s.c)((function(e){return e.userRegister})),N=E.loading,R=E.userInfo,C=E.error,I=Object(s.b)(),_=e.location.search?e.location.search.split("=")[1]:"/";return Object(n.useEffect)((function(){return R&&e.history.push(_),function(){}}),[R]),Object(r.jsx)("div",{className:"form",children:Object(r.jsx)("form",{onSubmit:function(e){e.preventDefault(),I(function(e,t,c){return function(){var r=Object(b.a)(u.a.mark((function r(n){var s,a;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n({type:Y,payload:{name:e,email:t,password:c}}),r.prev=1,r.next=4,p.a.post("/api/users/register",{name:e,email:t,password:c});case 4:s=r.sent,a=s.data,n({type:X,payload:a}),m.a.set("userInfo",JSON.stringify(a)),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(1),n({type:H,payload:r.t0.message});case 13:case"end":return r.stop()}}),r,null,[[1,10]])})));return function(e){return r.apply(this,arguments)}}()}(a,j,v))},children:Object(r.jsxs)("ul",{className:"form-container",children:[Object(r.jsx)("li",{children:Object(r.jsx)("h2",{children:"Create an account"})}),Object(r.jsx)("li",{children:C&&Object(r.jsx)("span",{className:"error",children:C})}),Object(r.jsxs)("li",{children:[Object(r.jsx)("label",{htmlFor:"name",children:"Name"}),Object(r.jsx)("input",{type:"name",name:"name",id:"name",onChange:function(e){return i(e.target.value)}})]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("label",{htmlFor:"email",children:"Email"}),Object(r.jsx)("input",{type:"email",name:"email",id:"email",onChange:function(e){return h(e.target.value)}})]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("label",{htmlFor:"password",children:"Password"}),Object(r.jsx)("input",{type:"password",id:"password",name:"password",onChange:function(e){return f(e.target.value)}})]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("label",{htmlFor:"rePassword",children:"Verify Password"}),Object(r.jsx)("input",{type:"password",id:"rePassword",name:"rePassword",onChange:function(e){return S(e.target.value)}})]}),Object(r.jsx)("li",{children:Object(r.jsx)("button",{type:"submit",className:"button primary",children:N?Object(r.jsx)("span",{children:"Sending info to database..."}):Object(r.jsx)("span",{children:"Continue"})})}),Object(r.jsx)("li",{children:"Already have an account?"}),Object(r.jsx)("li",{children:Object(r.jsx)(d.b,{to:"/"===_?"signin":"signin?redirect="+_,id:"link-to-register",children:"Sign in here"})})]})})})};var K=function(e){return Object(r.jsxs)("div",{className:"checkout-steps",children:[Object(r.jsx)("div",{className:e.step1&&"active",children:"Sign In"}),Object(r.jsx)("div",{className:e.step2&&"active",children:"Shipping"}),Object(r.jsx)("div",{className:e.step3&&"active",children:"Payment"}),Object(r.jsx)("div",{className:e.step4&&"active",children:"Checkout"})]})};var ee=function(e){var t=Object(s.c)((function(e){return e.userSignin})).userInfo;null===t&&e.history.push("/signin");var c=Object(n.useState)(""),a=Object(q.a)(c,2),i=a[0],d=a[1],o=Object(n.useState)(""),l=Object(q.a)(o,2),j=l[0],u=l[1],b=Object(n.useState)(""),h=Object(q.a)(b,2),p=h[0],O=h[1],x=Object(n.useState)(""),v=Object(q.a)(x,2),g=v[0],y=v[1],S=Object(n.useState)(""),E=Object(q.a)(S,2),N=E[0],R=E[1],C=Object(s.b)();return Object(r.jsxs)("div",{children:[Object(r.jsx)(K,{step1:!0,step2:!0}),Object(r.jsx)("div",{className:"form",children:Object(r.jsx)("form",{onSubmit:function(t){var c;t.preventDefault(),C((c={fullName:i,address:j,city:p,zipCode:g,country:N},function(e){e({type:f,payload:c}),m.a.set("shippingAddress",JSON.stringify(c))})),e.history.push("payment")},children:Object(r.jsxs)("ul",{className:"form-container",id:"secondary-form",children:[t&&Object(r.jsx)("input",{type:"hidden",onChange:function(e){return d(e.target.value)},value:t.name}),Object(r.jsx)("li",{children:Object(r.jsx)("h2",{children:"Shipping"})}),Object(r.jsxs)("li",{children:[Object(r.jsx)("label",{htmlFor:"address",children:"Address"}),Object(r.jsx)("input",{type:"text",name:"address",id:"address",onChange:function(e){return u(e.target.value)}})]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("label",{htmlFor:"city",children:"City"}),Object(r.jsx)("input",{type:"text",name:"city",id:"city",onChange:function(e){return O(e.target.value)}})]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("label",{htmlFor:"zipCode",children:"ZIP Code"}),Object(r.jsx)("input",{type:"text",name:"zipCode",id:"zipCode",onChange:function(e){return y(e.target.value)}})]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("label",{htmlFor:"country",children:"Country"}),Object(r.jsx)("input",{type:"text",name:"country",id:"country",onChange:function(e){return R(e.target.value)}})]}),Object(r.jsx)("li",{children:Object(r.jsx)("button",{type:"submit",className:"button primary",children:"Continue"})})]})})})]})};var te=function(e){Object(s.c)((function(e){return e.cart})).shippingAddress.address||e.history.push("/shipping");var t=Object(n.useState)(""),c=Object(q.a)(t,2),a=c[0],i=c[1],d=Object(s.b)();return Object(r.jsxs)("div",{children:[Object(r.jsx)(K,{step1:!0,step2:!0,step3:!0}),Object(r.jsx)("div",{className:"form",children:Object(r.jsx)("form",{onSubmit:function(t){var c;t.preventDefault(),d((c={paymentMethod:a},function(e){e({type:g,payload:c})})),e.history.push("checkout")},children:Object(r.jsxs)("ul",{className:"form-container",id:"secondary-form",children:[Object(r.jsx)("li",{children:Object(r.jsx)("h2",{children:"Payment"})}),Object(r.jsx)("li",{children:Object(r.jsxs)("div",{children:[Object(r.jsx)("input",{type:"radio",name:"paymentMethod",id:"paymentMethod",value:"paypal",onChange:function(e){return i(e.target.value)}}),Object(r.jsx)("label",{htmlFor:"paymentMethod",children:"PayPal"})]})}),Object(r.jsx)("li",{children:Object(r.jsx)("button",{type:"submit",className:"button primary",children:"Continue"})})]})})})]})},ce=c(16),re=c(17);var ne=function(e){var t=Object(s.c)((function(e){return e.userSignin})).userInfo,c=Object(s.c)((function(e){return e.cart})),a=c.cartItems,i=c.shippingAddress,o=c.payment,l=c.prices;console.log(l);var j=Object(s.c)((function(e){return e.orderCreate})),h=j.loading,O=j.success,x=j.error,v=j.order;i.address?o.paymentMethod||e.history.push("/payment"):e.history.push("/shipping");var f=function(e){return Number(e.toFixed(2))};c.itemsPrice=f(a.reduce((function(e,t){return e+t.price*t.qty}),0)),c.shippingPrice=c.itemsPrice>100?f(0):f(10),c.taxPrice=f(.15*c.itemsPrice),c.totalPrice=c.itemsPrice+c.shippingPrice+c.taxPrice;var g=Object(s.b)(),y=function(){g(function(e){return function(){var t=Object(b.a)(u.a.mark((function t(c,r){var n,s,a,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c({type:re.ORDER_CREATE_REQUEST,payload:e}),t.prev=1,n=r(),s=n.userSignin.userInfo,t.next=5,p.a.post("/api/orders",e,{headers:{Authorization:"Bearer "+s.token}});case 5:a=t.sent,i=a.data,c({type:re.ORDER_CREATE_SUCCESS,payload:i.order}),c({type:S}),m.a.removeItem("cartItems"),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),c({type:re.ORDER_CREATE_FAIL,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e,c){return t.apply(this,arguments)}}()}(Object(ce.a)(Object(ce.a)({},c),{},{orderItems:a})))};return Object(n.useEffect)((function(){return O&&(e.history.push("/order/"+v._id),g({type:re.ORDER_CREATE_RESET})),function(){}}),[g,v,e.history,O]),Object(r.jsxs)("div",{className:"cart-page",children:[Object(r.jsx)(K,{step1:!0,step2:!0,step3:!0,step4:!0}),Object(r.jsxs)("div",{className:"checkout",children:[Object(r.jsx)("div",{className:"cart-sidebar"}),Object(r.jsxs)("div",{className:"checkout-info",children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("h3",{children:"Shipping"}),Object(r.jsxs)("div",{children:[Object(r.jsx)("strong",{children:"Name: "}),t.name," ",Object(r.jsx)("br",{}),Object(r.jsx)("strong",{children:"Address: "}),i.address,", ",i.city,", ",i.zipCode,", ",i.country]})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h3",{children:"Payment"}),Object(r.jsxs)("div",{children:[Object(r.jsx)("strong",{children:"Method: "}),o.paymentMethod]})]}),Object(r.jsx)("div",{children:Object(r.jsxs)("ul",{className:"cart-list-container",children:[Object(r.jsx)("li",{children:Object(r.jsx)("h3",{children:"Order Items"})}),a.map((function(e){return Object(r.jsxs)("li",{children:[Object(r.jsx)("div",{className:"cart-image",children:Object(r.jsx)("img",{src:e.image,alt:"product"})}),Object(r.jsxs)("div",{className:"cart-name",children:[Object(r.jsx)("div",{children:Object(r.jsxs)(d.b,{className:"cart-link",to:"/product/"+e.product,children:[" ",e.name," "]})}),Object(r.jsxs)("div",{children:["Qty: ",e.qty," ",Object(r.jsxs)("small",{children:["(x $",e.price,")"]})]})]}),Object(r.jsxs)("div",{className:"cart-price",children:["$",e.price]})]},e.product)}))]})})]}),Object(r.jsx)("div",{className:"checkout-action",children:Object(r.jsxs)("ul",{children:[Object(r.jsx)("li",{children:Object(r.jsx)("button",{className:"button primary full-width",onClick:y,children:h?Object(r.jsx)("span",{children:"Completing Order..."}):Object(r.jsx)("span",{children:"Place Order"})})}),Object(r.jsx)("li",{children:Object(r.jsx)("h3",{children:"Order Summary"})}),Object(r.jsxs)("li",{children:[Object(r.jsx)("div",{children:"Items"}),Object(r.jsxs)("div",{children:["$",c.itemsPrice.toFixed(2)]})]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("div",{children:"Shipping"}),Object(r.jsxs)("div",{children:["$",c.shippingPrice.toFixed(2)]})]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("div",{children:"Tax"}),Object(r.jsxs)("div",{children:["$",c.taxPrice.toFixed(2)]})]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("div",{children:"Order Total"}),Object(r.jsxs)("div",{children:["$",c.totalPrice.toFixed(2)]})]}),Object(r.jsx)("li",{children:Object(r.jsx)("button",{className:"button primary full-width",onClick:y,children:h?Object(r.jsx)("span",{children:"Completing Order..."}):Object(r.jsx)("span",{children:"Place Order"})})}),x&&Object(r.jsx)("div",{children:x})]})})]})]})};var se=function(e){var t=Object(s.c)((function(e){return e.userSignin})).userInfo,c=Object(s.c)((function(e){return e.cart})),a=c.shippingAddress,i=c.payment,o=c.cartItems,l=e.match.params.id,j=Object(s.c)((function(e){return e.orderDetails})),h=j.loading,O=(j.order,j.error),m=Object(s.b)();return Object(n.useEffect)((function(){return m(function(e){return function(){var t=Object(b.a)(u.a.mark((function t(c,r){var n,s,a,i,d;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c({type:re.ORDER_DETAILS_REQUEST,payload:e}),t.prev=1,n=r(),s=n.userSignin.userInfo,t.next=5,p.a.get("/api/orders/"+e,{headers:{Authorization:"Bearer"+s.token}});case 5:a=t.sent,i=a.data,c({type:re.ORDER_DETAILS_SUCCESS,payload:i}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),d=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message,c({type:re.ORDER_DETAILS_FAIL,payload:d});case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,c){return t.apply(this,arguments)}}()}(l)),function(){}}),[m,l]),Object(r.jsxs)("div",{className:"cart-page",children:[h&&Object(r.jsx)("div",{className:"loading",children:"Loading..."}),O&&Object(r.jsx)("div",{className:"error",children:O}),Object(r.jsxs)("div",{className:"Order",children:[Object(r.jsx)("div",{className:"cart-sidebar"}),Object(r.jsxs)("div",{className:"Order-info",children:[Object(r.jsxs)("div",{children:[Object(r.jsxs)("h3",{children:["Order ",l]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("strong",{children:"Name: "}),t.name," ",Object(r.jsx)("br",{}),Object(r.jsx)("strong",{children:"Address: "}),a.address,", ",a.city,", ",a.zipCode,", ",a.country]})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h3",{children:"Payment"}),Object(r.jsxs)("div",{children:[Object(r.jsx)("strong",{children:"Method: "}),i.paymentMethod]})]}),Object(r.jsx)("div",{children:Object(r.jsxs)("ul",{className:"cart-list-container",children:[Object(r.jsx)("li",{children:Object(r.jsx)("h3",{children:"Order Items"})}),o.map((function(e){return Object(r.jsxs)("li",{children:[Object(r.jsx)("div",{className:"cart-image",children:Object(r.jsx)("img",{src:e.image,alt:"product"})}),Object(r.jsxs)("div",{className:"cart-name",children:[Object(r.jsx)("div",{children:Object(r.jsxs)(d.b,{className:"cart-link",to:"/product/"+e.product,children:[" ",e.name," "]})}),Object(r.jsxs)("div",{children:["Qty: ",e.qty," ",Object(r.jsxs)("small",{children:["(x $",e.price,")"]})]})]}),Object(r.jsxs)("div",{className:"cart-price",children:["$",e.price]})]},e.product)}))]})})]}),Object(r.jsx)("div",{className:"Order-action"})]})]})};var ae=function(){var e=Object(s.c)((function(e){return e.userSignin})).userInfo,t=function(){document.querySelector(".sidebar").classList.remove("open"),document.querySelector(".overlay").classList.remove("open")};return Object(r.jsx)(d.a,{children:Object(r.jsxs)("div",{className:"grid-container",children:[Object(r.jsxs)("header",{className:"header",children:[Object(r.jsxs)("div",{className:"brand",children:[Object(r.jsx)("button",{onClick:function(){document.querySelector(".sidebar").classList.add("open"),document.querySelector(".overlay").classList.add("open")},children:"\u2630"}),Object(r.jsx)(d.b,{to:"/",children:"Even Better Buy."})]}),Object(r.jsxs)("div",{className:"header-links",children:[Object(r.jsx)(d.b,{to:"/cart",children:"Cart"}),e?Object(r.jsx)(d.b,{to:"/profile",children:e.name}):Object(r.jsx)(d.b,{to:"/signin",children:"Sign In"})]})]}),Object(r.jsxs)("aside",{className:"sidebar",children:[Object(r.jsxs)("header",{className:"header",children:[Object(r.jsx)("h3",{children:"Categories"}),Object(r.jsx)("button",{onClick:t,children:"X"})]}),Object(r.jsxs)("ul",{children:[Object(r.jsx)("h4",{children:"Trending"}),Object(r.jsx)("li",{children:Object(r.jsx)("a",{href:"#",children:"New Arrivals"})}),Object(r.jsx)("li",{children:Object(r.jsx)("a",{href:"#",children:"Best Sellers"})})]}),Object(r.jsxs)("ul",{children:[Object(r.jsx)("h4",{children:"Departments"}),Object(r.jsx)("li",{children:Object(r.jsx)("a",{href:"#",children:"Pants"})}),Object(r.jsx)("li",{children:Object(r.jsx)("a",{href:"#",children:"Shirts"})})]})]}),Object(r.jsx)("main",{className:"main",children:Object(r.jsxs)("div",{className:"content",children:[Object(r.jsx)(o.a,{path:"/order/:id",component:se}),Object(r.jsx)(o.a,{path:"/checkout",component:ne}),Object(r.jsx)(o.a,{path:"/payment",component:te}),Object(r.jsx)(o.a,{path:"/shipping",component:ee}),Object(r.jsx)(o.a,{path:"/products",component:J}),Object(r.jsx)(o.a,{path:"/signin",component:W}),Object(r.jsx)(o.a,{path:"/register",component:Z}),Object(r.jsx)(o.a,{path:"/product/:id",component:B}),Object(r.jsx)(o.a,{path:"/cart/:id?",component:N}),Object(r.jsx)(o.a,{path:"/",exact:!0,component:M})]})}),Object(r.jsx)("div",{className:"overlay",onClick:t}),Object(r.jsx)("footer",{className:"footer",children:"All rights reserved."})]})})},ie=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,73)).then((function(t){var c=t.getCLS,r=t.getFID,n=t.getFCP,s=t.getLCP,a=t.getTTFB;c(e),r(e),n(e),s(e),a(e)}))},de=c(19);var oe=c(41);var le=c(17),je=le.ORDER_CREATE_REQUEST,ue=le.ORDER_CREATE_SUCCESS,be=le.ORDER_CREATE_FAIL,he=le.ORDER_DETAILS_REQUEST,pe=le.ORDER_DETAILS_SUCCESS,Oe=le.ORDER_DETAILS_FAIL,me=le.ORDER_CREATE_RESET,xe={cart:{cartItems:m.a.getJSON("cartItems")||[],shippingAddress:{shippingAddress:m.a.getJSON("shippingAddress")||{}},payment:{},prices:{}},previous:{previousItems:m.a.getJSON("previousItems")||[]},userSignin:{userInfo:m.a.getJSON("userInfo")||null}},ve=Object(de.c)({productList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{products:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return{loading:!0,products:[]};case C:return{loading:!1,products:t.payload};case I:return{loading:!1,error:t.payload};default:return e}},productDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{product:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return{loading:!0};case T:return{loading:!1,product:t.payload};case A:return{loading:!1,error:t.payload};default:return e}},productSave:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{product:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return{loading:!0};case D:return{loading:!1,success:!0,product:t.payload};case w:return{loading:!1,error:t.payload};default:return e}},productDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{product:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return{loading:!0};case U:return{loading:!1,success:!0,product:t.payload};case L:return{loading:!1,error:t.payload};default:return e}},previous:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{previousItems:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:var c=t.payload,r=e.previousItems.find((function(e){return e.product===c.product}));return console.log(e.previousItems),r?{previousItems:e.previousItems.map((function(e){return e.product===r.product?c:e}))}:{previousItems:[].concat(Object(l.a)(e.previousItems),[c])};default:return e}},userSignin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return{loading:!0};case V:return{loading:!1,userInfo:t.payload};case G:return{loading:!1,error:t.payload};default:return e}},userRegister:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y:return{loading:!0};case X:return{loading:!1,userInfo:t.payload};case H:return{loading:!1,error:t.payload};default:return e}},orderCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case je:return{loading:!0};case ue:return{loading:!1,success:!0,order:t.payload};case be:return{loading:!1,error:t.payload};case me:return{};default:return e}},orderDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!0,order:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case he:return{loading:!0};case pe:return{loading:!1,order:t.payload};case Oe:return{loading:!1,error:t.payload};default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cartItems:[],shipping:{},payment:{},prices:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:var c=t.payload,r=e.cartItems.find((function(e){return e.product===c.product}));return r?{cartItems:e.cartItems.map((function(e){return e.product===r.product?c:e}))}:{cartItems:[].concat(Object(l.a)(e.cartItems),[c])};case v:return{cartItems:e.cartItems.filter((function(e){return e.product!==t.payload}))};case f:return Object(ce.a)(Object(ce.a)({},e),{},{shippingAddress:t.payload});case g:return Object(ce.a)(Object(ce.a)({},e),{},{payment:t.payload});case y:return Object(ce.a)(Object(ce.a)({},e),{},{prices:t.payload});case S:return Object(ce.a)(Object(ce.a)({},e),{},{cartItems:[]});default:return e}}}),fe=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||de.d,ge=Object(de.e)(ve,xe,fe(Object(de.a)(oe.a)));i.a.render(Object(r.jsx)(s.a,{store:ge,children:Object(r.jsx)(ae,{})}),document.getElementById("root")),ie()}},[[72,1,2]]]);
//# sourceMappingURL=main.8434fb71.chunk.js.map